// Generated by CoffeeScript 1.3.3
(function() {
  var TIMEOUT, should, someText, test, wdSync;

  wdSync = require('../../index');

  should = require('should');

  someText = null;

  TIMEOUT = 30000;

  test = function(opt) {
    return describe("wd wrap tests", function() {
      describe("with pre", function() {
        var browser, wrap;
        browser = {}.browser;
        wrap = wdSync.wrap({
          pre: function() {
            this.timeout(opt.timeout || TIMEOUT);
            return someText = 'Test2';
          },
          "with": function() {
            return browser;
          }
        });
        before(function(done) {
          switch (opt.type) {
            case 'remote':
              browser = wdSync.remote(opt.remoteConfig).browser;
              break;
            case 'headless':
              browser = wdSync.headless().browser;
          }
          return done();
        });
        return it("should work", wrap({
          pre: function() {
            return this.timeout((opt.timeout || TIMEOUT) + 100);
          }
        }, function() {
          var queryField;
          someText.should.equal('Test2');
          this.init(opt.desired);
          this.get("http://saucelabs.com/test/guinea-pig");
          this.title().toLowerCase().should.include('sauce labs');
          queryField = this.elementById('i_am_a_textbox');
          this.type(queryField, "Hello World");
          this.type(queryField, "\n");
          return this.quit();
        }));
      });
      return describe("without pre", function() {
        var browser, wrap;
        browser = {}.browser;
        wrap = wdSync.wrap({
          "with": function() {
            return browser;
          }
        });
        before(function(done) {
          switch (opt.type) {
            case 'remote':
              browser = wdSync.remote(opt.remoteConfig).browser;
              break;
            case 'headless':
              browser = wdSync.headless().browser;
          }
          return done();
        });
        return it("should work", wrap(function() {
          var queryField;
          this.init(opt.desired);
          this.get("http://saucelabs.com/test/guinea-pig");
          this.title().toLowerCase().should.include('sauce labs');
          queryField = this.elementById('i_am_a_textbox');
          this.type(queryField, "Hello World");
          this.type(queryField, "\n");
          return this.quit();
        }));
      });
    });
  };

  exports.test = test;

}).call(this);
